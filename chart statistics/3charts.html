<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>London Attractions Analysis</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/papaparse@5.4.1/papaparse.min.js"></script>
  <style>
    html, body {
      margin: 0;
      padding: 0;
      height: 100%;
      font-family: Arial, sans-serif;
        overflow: hidden;
         background-color: #f6f1ec;
    }
    .container {
  display: flex;
  height: 100vh;
  /* margin-top: 30px; è·ç¦»é¡µé¢é¡¶éƒ¨ç•™ç™½ */
  /* padding-top: 30px; */
}
      
      .left-panel {
  display: flex;
  flex-direction: column;
  gap: 20px;
  align-items: center;
  
  padding: 100px 50px 80px 100px; /* å¢åŠ é¡¶éƒ¨å’Œå·¦ä¾§å†…è¾¹è· */
}

  .chart-block {
    width: 100%;
    max-width: 800px;
  }

  .bottom-charts {
  display: flex;
  justify-content: center;
  gap: 20px;
  flex-wrap: wrap; /* å…è®¸æ¢è¡Œï¼Œä½†åœ¨å®½åº¦è¶³å¤Ÿæ—¶å¹¶æ’ */
}

  .bottom-charts .chart-block {
  flex: 1 1 40%;
  max-width: 400px;  /* æˆ–è€…æ”¹æˆå›ºå®šå®½åº¦ 350px */
  min-width: 280px;
  display: flex;
  justify-content: center;  /* å›¾è¡¨æ°´å¹³å±…ä¸­ */
}

.bottom-charts .chart-block canvas {
  max-width: 100%;
  max-height: 300px;
  width: 100% !important;
  height: auto !important;
}

  canvas {
    width: 100% !important;
    height: auto !important;
  }
  
      /* ç¼©å° chart2 å’Œ chart3 çš„ canvas */
.bottom-charts .chart-block canvas {
  max-width: 90%;
  max-height: 240px;
  width: 90% !important;
  height: auto !important;
}

.right-panel {
  flex: 1;
  padding: 10px 100px 100px 20px; /* å·¦50ï¼Œä¸Šä¸‹50ï¼Œå³100ï¼ŒåŠ å¤§å³è¾¹è· */
  overflow-y: hidden;
  height: 100%;

  display: flex;
  flex-direction: column;
  justify-content: center;
}
    
.chart-text1, .chart-text2  {
      margin-bottom: 10px;
    }

    .chart-text1 p {
  font-family: 'Arial', sans-serif;
  font-size: 14px;
  color: #333;
}

      .chart-block canvas {
    max-width: 800px;
    max-height: 400px;
    width: 80%;
    height: auto;
  }
  </style>
</head>
<body>
  <div class="container">
    <!-- å›¾è¡¨å±•ç¤ºåŒº -->
  <div class="left-panel">
  <!-- Top chart -->
  <div class="chart-block">
    <canvas id="chart1"></canvas>
  </div>

  <!-- Bottom two charts side-by-side -->
  <div class="bottom-charts">
    <div class="chart-block">
      <canvas id="chart2"></canvas>
    </div>
    <div class="chart-block">
      <canvas id="chart3"></canvas>
    </div>
  </div>

  <p id="source" style="margin-top: 2rem; font-size: 0.85rem; color: #888; text-align: center;">
    Source: 
    <a href="https://www.visitbritain.org/research-insights/england-visitor-attractions-latest" target="_blank" style="color: #888; text-decoration: underline;">
      VisitBritain â€“ England Visitor Attractions
  </a>
    </a >
  </p >
</div>

    <!-- æ–‡å­—è¯´æ˜åŒº -->
    <div class="right-panel">
      <div class="chart-text1">
         <!-- ç¬¬ä¸€ä¸ªæ ‡é¢˜ -->
<h2 style="font-family: 'Merriweather', serif; font-size: 30px; color: #333; margin-bottom: 10px;">
  Focus on Central London
</h2>

<p>
  London not only has the highest attraction density, but also far surpasses other regions in total visitor numbers.
</p>

<p>
  According to the previous interactive map, several boroughs in central London have a high concentration of sites, making them ideal locations for urban walking and exploration.
</p>

<p>
  <strong style="color: #8466C6;">For these reasons, we have chosen central London as the focus of our in-depth study on customized travel experiences!</strong>
</p>

<!-- ç¬¬äºŒä¸ªæ ‡é¢˜ -->
<h2 style="font-family: 'Merriweather', serif; font-size: 30px; color: #333; margin-top: 30px; margin-bottom: 10px;">
  Find Your Own Trip!
</h2>

<p>
  From the chart, we can see two key patterns:
  <ul>
    <li style="font-size: 13px;">A highly concentrated <strong>"head effect"</strong> â€” the top 10 attractions alone attract over 70% of all visitors.</li>
    <li style="font-size: 13px;"><strong>Museums and galleries</strong> and <strong>historic buildings and sites</strong> together account for 91.5% of total visitors.</li>
  </ul>
</p>

<p>
  Some iconic urban attractions are missing from official statistics, such as the <strong>West End theatres</strong> and <strong>Harrods</strong>. 
  Though not classified as traditional tourist sites, they play a vital role in shaping Londonâ€™s diverse appeal.
</p>

<p>
  Overall, visitor preferences are not only concentrated on a few well-known spots but also show a strong tendency toward similar types of attractions.
</p>

<p>
  This raises an important question: 
  <br> 
  <strong style="color: #8466C6;">How can visitors move beyond the â€œinformation cocoonâ€ of mainstream recommendations and discover the cityâ€™s lesser-known, yet equally enriching, hidden gems?</strong>
</p>
            
                
       
      
    </div>
  </div>
    
  
<script>
 
  Papa.parse('region_summary.csv', {
  download: true,
  header: true,
  dynamicTyping: true,
  complete: function(results) {
    const data = results.data;

    const regions = data.map(d => d.Region);
    const densities = data.map(d => d["Attraction Density (per sqkm)"]);
    const visitors = data.map(d => d["Total Visitors 2023"]);

    const ctx = document.getElementById('chart1').getContext('2d');
    new Chart(ctx, {
      type: 'bar',
      data: {
        labels: regions,
        datasets: [
          {
            label: 'Attraction Density (per sqkm)',
            data: densities,
            // backgroundColor: 'rgba(54, 162, 235, 0.7)',
            backgroundColor: '#FFD700',
            yAxisID: 'y',
          },
          {
            label: 'Total Visitors (2023)',
            data: visitors,
            backgroundColor: '#8466C6',
            // backgroundColor: 'rgba(75, 192, 192, 0.7)',
            yAxisID: 'y1',
          }
        ]
      },
      options: {
        responsive: true,
        interaction: {
          mode: 'index',
          intersect: false,
        },
        plugins: {
          title: {
            display: true,
            text: 'Attraction Density and Total Visitors by Region (2023)'
          },
//          legend: {
//            display: false  // ğŸ‘ˆ å…³é—­å›¾ä¾‹æ˜¾ç¤º
//          }
        },
        scales: {
          x: {
            ticks: {
              maxRotation: 45,
              minRotation: 45,
            }
          },
          y: {
            type: 'linear',
            position: 'left',
            title: {
              display: true,
              text: 'Attraction Density (per sqkm)'
            },
            ticks: {
              color: '#333333'
            }
          },
          y1: {
            type: 'linear',
            position: 'right',
            title: {
              display: true,
              text: 'Total Visitors (2023)'
            },
            grid: {
              drawOnChartArea: false
            },
            ticks: {
              color: '#333333'
            }
          }
        }
      }
    });
  }
});

    
// è¯»å– top10_vs_others.csv å¹¶ç»˜åˆ¶é¥¼å›¾
Papa.parse('top10_vs_others.csv', {
  download: true,
  header: true,
  dynamicTyping: true,
  complete: function(results) {
    const data = results.data;

    // æå–æ ‡ç­¾å’Œæ•°æ®
    const labels = data.map(d => d.Attraction);
    const sizes = data.map(d => d["Visitors 2023"]);

    const ctx2 = document.getElementById('chart2').getContext('2d');
    new Chart(ctx2, {
      type: 'pie',
      data: {
        labels: labels,
        datasets: [{
          data: sizes,
          backgroundColor: [
  '#A6CEE3',  // æ·¡è“
  '#B2DF8A',  // æ·¡ç»¿
  '#FDBF6F',  // æ·¡æ©™
  '#CAB2D6',  // æ·¡ç´«
  '#FFB3B3',  // ç²‰çº¢
  '#FFFFB3',  // æ·¡é»„
  '#B3DE69',  // é’ç»¿
  '#FCCDE5',  // ç²‰ç´«
  '#D9D9D9',  // æµ…ç°
  '#CCEBC5',  // å†·é’ç»¿
  '#BC80BD'   // æŸ”ç´«ï¼ˆä½œä¸º Othersï¼‰
]
        }]
      },
      options: {
        responsive: true,
        plugins: {
          title: {
            display: true,
            text: 'Top 10 Attractions vs Others (London 2023)'
          },
          tooltip: {
            callbacks: {
              label: function(context) {
                let label = context.label || '';
                let value = context.parsed;
                let total = context.chart._metasets[0].total;
                let percentage = ((value / total) * 100).toFixed(1);
                return `${label}: ${value.toLocaleString()} (${percentage}%)`;
              }
            }
          },
          legend: {
            display: false 
          }
        }
      }
    });
  }
});
    
    Papa.parse('category_summary.csv', {
  download: true,
  header: true,
  dynamicTyping: true,
  complete: function(results) {
    const data = results.data;

    const labels = data.map(d => d["Main_Category"]);
    const values = data.map(d => d["Visitors 2023"]);

    const ctx3 = document.getElementById('chart3').getContext('2d');
    new Chart(ctx3, {
      type: 'pie',
      data: {
        labels: labels,
        datasets: [{
          label: 'Total Visitors',
          data: values,
          backgroundColor: [
            '#8dd3c7', '#ffffb3', '#bebada', '#fb8072', '#80b1d3',
            '#fdb462', '#b3de69', '#fccde5', '#d9d9d9', '#bc80bd',
            '#ccebc5', '#ffed6f'
          ],
          borderWidth: 1
        }]
      },
      options: {
        responsive: true,
        plugins: {
          title: {
            display: true,
            text: 'Total Visitors by Attraction Type (London 2023)'
          },
          tooltip: {
            callbacks: {
              label: function(context) {
                const label = context.label || '';
                const value = context.parsed;
                const total = context.chart._metasets[0].total;
                const percentage = ((value / total) * 100).toFixed(1);
                return `${label}: ${value.toLocaleString()} (${percentage}%)`;
              }
            }
          },
          legend: {
            display: false  // ğŸ‘ˆ å»æ‰å›¾ä¾‹
          }
        }
      }
    });
  }
});
</script>
</body>
</html>